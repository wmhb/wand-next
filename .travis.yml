language: node_js
node_js:
- '14'
env:
  global:
    - secure: Byh8nXlGWCOTAKDUUKzdnotY0+egpUT/UhWNfAzg4aebZllCwKdSf+Pd61V9mWvyMWi3ymkDpZocxu0XTJmGi+tIhfwtbU0rJToWC3PMMl7sZyPBGsboDltsAIzfUK4GbUQuLlLnbhxdODGJ1CHWmf0KdRSMFRZ6f6xKiDIoXDK7L3T0sH3Gx13QTOujfyPOID6wDuEGEgDFWYFO5pofkDu7HX4bVSE9OXbbLIYoDkFFrrQgtMFa196uwG39hDB0WCURry4ZHn7SJAh71ariVDNw4YQfFe75/9kUxN3WbYJOWDbgjPvipWXAwkgODW+oA0hkBybRPClwx35B3WCFziPDdw3g0/HL065cc4T7gmjC3NdW+b8elh0A4Xgr1llaViJx+Du71iiAfXry/MsQKOh6gFVXKicBXmvG0ZvEzl/K7Sf7CjjVwLJT2nKLR8Db//D9Uyg7auc+M5ee+tsfuDP6fI59+9C/6CJHrEC4bnzqo0rhG7CUpXuIJivL7v4s2HsQeLHy/NE5DGM2OXXF3JP38tpfkWVqJ0eNBdzMYfPKG+nkiCleYV8OniBx6brTVsUINVs+BHL0iMUPz13Un7mqcrV2EHal6ks4yWun0xdTMcf2yBYZX4VyHLi2RQv6yd1BWRJfA86hrH9iIM8rCeBQHICKW7W4dlNPhr+h85E=
    - secure: s0HITvCf/3h7Pu6wrMzLOsMM9+sSqSF6hDo8bjRaJ9JZP3iwdG+h/C2xp6z6YbOnKmzB5mJr0/Cvnbbhh4vew3UipddS8Bnzbx7JZjscRmcJLzJ+EMjHFo4SqJq/3eYFC1pTFxJ1kpcz+Y6r6GYfQ4s/bLmlVb6vmh0oxS9VQCSzOlHx6hMjdX9yI9ZomaAL0/IeGuEre0YKCsqUbEzHltgIynZHCGkutK6D79oN863W5WXoRGL11UD2GQjjTVGYVdPykjer+GBoI7mvQUfz8B/cndLry3B/XQBF5jt/I4agZq8GAky1p61c0Qn7L348OKMAtqqGWOXKcLjt1xpkavPgF8/leQIniusj0SddHgzw6EDLLxU8261J1QQBX7Q12O3MoEnquA9nmn4JxCc/OQVKsm1X2C2Wvo729T1othwSlB+J0KnprUzD0dSszOq5cJEcVJZvHR4ctZh3EkmXpdVJ63SGc9pDEFYvZcEDh3AlCcIwu+fV9U9xdusKMDcquTgyjYpKZ4EXwKaDtEKy23oduU5UO5OEu3rrba1PwBoPPESOIVJC82jmuHWKbZuLpF4SnfbosXPkhytRl4rhfWu4gwYJnmqW9PHyVc1b8MSHyO4HovOVLEg8XrHol8TMQLZq3ClBVwy4QscIZC8KuHqBQBYrPOSISo83XkDH21s=
    - secure: JeyNnAtvqEryqtbNNjlBg/usB5M8sBTV9l/BRyei7hTP7xCTvvLMafAlUNyOgcxXghaUW6RzZLW14l8Yn9extFoZg5QGyhLpGUJD8U2okw3uJyWb1MVjJmga0C/a9mb0YvGxQKIDLr9hxbjV9TpKYrfZqokwjzLkYtyDuhXfsuS7/fRtPCUX5AD470QCkF/+rdhffFA1EyLeti3pnTOQvGChgeJwvZWUej6DDimiYeHInG2Ow0GksO1jd3ppb4PLOG/q0fX84zZBsdD8uIhjWq1533D5OINxll8QO7qkq+UIzKNQV6YW+GM9k9efKiDDYpqbcWRnFT3XA4Agnt5NizqhohS34qw0e7eI0hkmL4aJdCvUN9Wzi+nb29DkceDtQBcaDDG2jssOPUO/kjLRKx1D+UlkpBL/lWA/7SdChY9vGB/jmnBNZ6d6bP22cgcvNiEPRR178qeDrNqcMSELVaS56t0V6YEUPfJcG2NaYK2GVf1BOGCWEIgA8OrP6a8h9TVccZppqEOJ8JZuk26A59u+oBA99mXTosTwZdDavYj7JlWoqEmbblQv8a8oJbNHBlOWEs8nPTWrRK4YEQk4EG/8xFSBjxOijvslo/oNAsieXnxs/q7pRnMWTf1A74mw62Lm2tT3d3Y9TtpWpUbPxHWP/pAkl206483JBOQtH0Y=
    - secure: MVrPN6zB844A74Fzvxx7fVC24fax5rZO0eYs/nwU+/Hh8K4dEaxrNA4IA0qdp/HNGBV9Ub4YDxyAtJ4lwA7fIgak4hA0LOziWKbGaM0T435Rqu7UeOxT7eUzDV92GgOEP3I0yncvHba+r7rkp2WC/iw2L6AFtF0g8zNYBTJy4O+iCl7Lf8vnR6FMm5lsf7GDQIVJgtNbagICVqfOvNvN74p5m5noBujO54FWVh5mcI9jaGQzM2kYlfDEbkysRAAcMPTH3E+OmV8PTAdVD2T75hj433Gbhw1L0rQ/FMeBHqbOfZ4LkSjnLzgW3P06mHHtW7CA8OyFWm4vGdR9o33C0iFZMU6r1MYiafhCdIagWKjvMbiYZSzY12ojTPMG8Ddw9yMNE4P7eEQn1Gotmq6yXELtB/oYKY4Q8h5AtzUPIGP0CDxuFduSximcCPYzjlWpIaPKBBJzCW4wBjvuPwQERxepxJ2GGEjeNjn/JU+0wlJM4+TbyG0xVEshdGgdSGdDf1Ofor6n5nKeg7ZqKCERx45EB0bZranZmRQFjAfnO3881IV3b3JBEUPOz4ryguIX0/lzT5Sd9u3C4650zeM2FSVuscLCJoL/kWu772ni/6Rg0w6YGUQcezuPx/GHqMbbJdDsI2pK9Jb1XNRMa3LIRN5G//imHl1Ou9cVO1triD8=
matrix:
  include:
  - name: Server
    before_install:
    - npx npm-force-resolutions
    - npm prune
    - npm install
    script:
    - cp config.example.js config.js
    - npm run vue:lint
    - npm run vue:build
    before_deploy:
    - echo "Building master branch - Deploying app..."
    - echo $DEPLOY_SERVER 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC6moWj2SpEtZFTkDu57pWRLIjkuWBOjxWXxcqVaHgYY+pXRlwJBEhlLfc3Aoz0xPxrUk4k/PgtmyTUfinsoC/XKjI7hJql8MKa92eL9Zug/f/lEooFG5awLmikVYmePDfxr23Hw1Ti83oHBrljj17B+0wAPY8gNf+GuuB0n63x7idX35fhhj8R+FzynMObUM1Vqglxm2Q55Z9YJv02HmNc/bQD+XZlDKhaw2DruP/eko6pvcR2gSy4zyWefLHdni4qk8qhZ73wIyiLBSfhhBFNOIZGEdvbjoxI1ddvWao7X5X2xmRNalWJfSiKFw6PoZdtzRKXN6PRoGGAEVxTmEYI9M6jkAdUhxb4VFlWPkAUTIW+AJu90mARDqkKiKxWydg9z0su/2PMkGXh8c+toa/Xz3FqbNuhbCzFovvaTQbWwyBo/v//DkhMlYE6tKyBm8LYBc5/QH0y384hEGqqwO0KVK/KXl5Ap4r/6BT4l5kGuhBrBVixXPxBaQHGi7mwa95JZlLfe2N18ZizK9Vkvjy3H+baCCkmgfY6tvbgUH5xHcxFIZOP5Et8NpPTx0As8K3QFXq4KxlRzjVn+zFdsuO0TSPyWJ7P0nWcc/o8GWFXmRfJH8xQmMLbMJuNwbZjPoqkWYKyKy5tnH/M+pKh2xwKvpW83Q5FE5c0+YDlbXAxHQ==' >> $HOME/.ssh/known_hosts
    - openssl aes-256-cbc -K $encrypted_c203fb406a06_key -iv $encrypted_c203fb406a06_iv -in $TRAVIS_BUILD_DIR/deploy_rsa.enc -out /tmp/deploy_rsa -d
    - eval "$(ssh-agent -s)"
    - chmod 600 /tmp/deploy_rsa
    - ssh-add /tmp/deploy_rsa
    deploy:
      provider: script
      skip_cleanup: true
      script: bash scripts/deploy.sh
      on:
        branch: master
